#!/bin/bash

InstallPrefix="@CMAKE_INSTALL_PREFIX@"
ProjectBinaryDir="@binary_dir@"
OSX_App_Name="@target@"
OSX_App="@CMAKE_RUNTIME_OUTPUT_DIRECTORY@/$OSX_App_Name.app"


Qt4LibDir="@QT_LIBRARY_DIR@"
Qt4BinDir="$(dirname @QT_MOC_EXECUTABLE@)"

# Remove the previous app package so we start with a clean bundle
echo "Removing Previous $OSX_App_Name.app bundle at $InstallPrefix/"
rm -rf "$InstallPrefix/$OSX_App_Name.app"

# copy the paraview.app bundle to the installation location
echo "Copying $OSX_App_Name.app from the build tree to $InstallPrefix/"
cp -Rp "$OSX_App" "$InstallPrefix/$OSX_App_Name.app"

OSX_App="$InstallPrefix/$OSX_App_Name.app"
ContentsDir="$OSX_App/Contents"
SupportDir="$OSX_App/Contents/Support"
LibrariesDir="$OSX_App/Contents/Libraries"
FrameworksDir="$OSX_App/Contents/Frameworks"
#PythonDir="$OSX_App/Contents/Python"
#PluginsDir="$OSX_App/Contents/Plugins"


# create directories in the application bundle
mkdir -p "$SupportDir"
if [ ! -e $LibrariesDir ]
then
mkdir -p "$LibrariesDir"
fi

#cd $ContentsDir/
# Run the cmake script that will fix all the libraries.
#cmake -P "@OSX_MAKE_STANDALONE_BUNDLE_CMAKE_SCRIPT@"
