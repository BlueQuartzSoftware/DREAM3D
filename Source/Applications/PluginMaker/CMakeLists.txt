project(PluginMaker)
cmake_minimum_required(VERSION 2.8.9)

# ------------------------------------------------------------------------------
#  Qt 4 Section
# ------------------------------------------------------------------------------
if(QT4_FOUND)
    include( ${QT_USE_FILE} )
else()
    message(FATAL_ERROR "Qt 4 is Needed for this project.")
endif(QT4_FOUND)


# Set the GUI type for different platforms
SET(GUI_TYPE )

# Set some Win32 Specific Settings
if(WIN32)
 SET(GUI_TYPE WIN32)
ENDif(WIN32)

add_definitions(-DDREAM3D_USE_QT)

# --------------------------------------------------------------------
# Generate the License File Headers
set(PROJECT_PREFIX "PluginMakerProj")
include(${DREAM3DProj_SOURCE_DIR}/License/License.cmake)

set(PluginMaker_SRCS
    ${PluginMaker_SOURCE_DIR}/main.cpp
  ${PluginMaker_SOURCE_DIR}/PluginMaker.cpp
  ${PluginMaker_SOURCE_DIR}/HelpWidget.cpp
  ${PluginMaker_SOURCE_DIR}/PMDirGenerator.cpp
  ${PluginMaker_SOURCE_DIR}/PMFileGenerator.cpp
  ${PluginMaker_SOURCE_DIR}/PMFilterGenerator.cpp
  ${PluginMaker_SOURCE_DIR}/AddFilterWidget.cpp
  ${PluginMaker_SOURCE_DIR}/FilterBundler.cpp
    ${DREAM3DProj_SOURCE_DIR}/Source/QtSupport/ApplicationAboutBoxDialog.cpp
  )

SET(PluginMaker_HDRS
    ${PluginMaker_SOURCE_DIR}/FilterBundler.h
    ${PluginMaker_SOURCE_DIR}/PMGeneratorTreeItem.h
  )

SET(PluginMaker_MOC_HDRS
    ${PluginMaker_SOURCE_DIR}/PluginMaker.h
  ${PluginMaker_SOURCE_DIR}/HelpWidget.h
    ${PluginMaker_SOURCE_DIR}/PMDirGenerator.h
    ${PluginMaker_SOURCE_DIR}/PMFileGenerator.h
    ${PluginMaker_SOURCE_DIR}/PMFilterGenerator.h
    ${DREAM3DProj_SOURCE_DIR}/Source/QtSupport/ApplicationAboutBoxDialog.h
  ${PluginMaker_SOURCE_DIR}/AddFilterWidget.h
  ${DREAM3DProj_SOURCE_DIR}/Source/QtSupport/ApplicationAboutBoxDialog.h
  )
cmp_IDE_SOURCE_PROPERTIES( "PluginMaker" "${PluginMaker_HDRS};${PluginMaker_MOC_HDRS}" "${PluginMaker_SRCS}" "${PROJECT_INSTALL_HEADERS}")

# The UI files As generated by Qt Designer
SET(PluginMaker_UIS
  ${PluginMaker_SOURCE_DIR}/UI_Files/PluginMaker.ui
  ${PluginMaker_SOURCE_DIR}/UI_Files/HelpWidget.ui
  ${PluginMaker_SOURCE_DIR}/UI_Files/AddFilterWidget.ui
    ${DREAM3DProj_SOURCE_DIR}/Source/QtSupport/UI_Files/ApplicationAboutBoxDialog.ui
  )

cmp_IDE_GENERATED_PROPERTIES("PluginMaker/UI_Files" "${PluginMaker_UIS}" "")

# and finally any resource files
SET(PluginMaker_RCS ${PluginMaker_SOURCE_DIR}/Templates.qrc)

# -- Run MOC and UIC on the necessary files
QT4_ADD_RESOURCES( PluginMaker_Generated_RC_SRCS ${PluginMaker_RCS} ${QRC_LICENSE_FILES})

# this will run uic on .ui files:
QT4_WRAP_UI( PluginMaker_Generated_UI_HDRS ${PluginMaker_UIS} )

# and finally this will run moc:
QT4_WRAP_CPP( PluginMaker_Generated_MOC_SRCS ${PluginMaker_MOC_HDRS} )

#-- Put the generated files into their own group for IDEs
cmp_IDE_GENERATED_PROPERTIES("Generated/ui" "${PluginMaker_Generated_UI_HDRS}" "")
cmp_IDE_GENERATED_PROPERTIES("Generated/moc" "${PluginMaker_Generated_MOC_SRCS}" "")
cmp_IDE_GENERATED_PROPERTIES("Generated/qrc" "${QRC_LICENSE_FILES}" "${PluginMaker_Generated_RC_SRCS}")

# -- Finally set the Project Sources to include all the sources
set(${PROJECT_NAME}_PROJECT_SRCS
  ${PluginMaker_SRCS}
    ${PluginMaker_HDRS}
  ${PluginMaker_MOC_HDRS}
    ${PluginMaker_Generated_RC_SRCS}
    ${PluginMaker_Generated_UI_HDRS}
    ${PluginMaker_Generated_MOC_SRCS}
  )
#message(STATUS "${PROJECT_NAME}_PROJECT_SRCS: ${${PROJECT_NAME}_PROJECT_SRCS}")
include_directories(${PluginMaker_SOURCE_DIR} )
include_directories(${PluginMaker_SOURCE_DIR}/.. )
include_directories(${PluginMaker_BINARY_DIR} )
include_directories(${DREAM3DProj_BINARY_DIR}/QtSupport)
include_directories(${DREAM3DProj_SOURCE_DIR}/Source/QtSupport)


if(APPLE)
    set(APPLICATION_ICON ${PROJECT_RESOURCES_DIR}/icons/icns/${PROJECT_NAME}.icns)
endif(APPLE)

if(Q_WS_WIN)
    set(APPLICATION_ICON ${PROJECT_RESOURCES_DIR}/icons/ico/${PROJECT_NAME}.ico)
ENDif(Q_WS_WIN)

set(DEST_DIR ".")
if(UNIX AND NOT APPLE)
    set(DEST_DIR "bin")
endif()

BuildQtAppBundle(
    TARGET ${PROJECT_NAME}
    SOURCES ${PluginMaker_PROJECT_SRCS}
    DEBUG_EXTENSION ${EXE_DEBUG_EXTENSION}
    ICON_FILE  ${APPLICATION_ICON}
    VERSION_MAJOR ${DREAM3D_VER_MAJOR}
    VERSION_MINOR ${DREAM3D_VER_MINOR}
    VERSION_PATCH ${DREAM3D_VER_PATCH}
    BINARY_DIR    ${${PROJECT_NAME}_BINARY_DIR}
    LINK_LIBRARIES ${QT_LIBRARIES} QtSupport
    LIB_SEARCH_DIRS ${CMAKE_LIBRARY_OUTPUT_DIRECTORY} ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}
#    QT_PLUGINS    ${QT_PLUGINS}
#    OTHER_PLUGINS ${OTHER_PLUGINS}
    COMPONENT     Applications
    INSTALL_DEST  ${DEST_DIR}
)
